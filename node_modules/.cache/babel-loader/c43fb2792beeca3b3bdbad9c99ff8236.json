{"remainingRequest":"/Users/liuyitian/Downloads/silver-ant-ui/node_modules/babel-loader/lib/index.js!/Users/liuyitian/Downloads/silver-ant-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuyitian/Downloads/silver-ant-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuyitian/Downloads/silver-ant-ui/node_modules/vue-task-node/src/lib/components/workarea/workarea.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuyitian/Downloads/silver-ant-ui/node_modules/vue-task-node/src/lib/components/workarea/workarea.vue","mtime":499162500000},{"path":"/Users/liuyitian/Downloads/silver-ant-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuyitian/Downloads/silver-ant-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liuyitian/Downloads/silver-ant-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuyitian/Downloads/silver-ant-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport mixinsTool from '../../mixins/tool';\nconst prefixCls = 'task-work-area';\nexport default {\n  name: 'WorkArea',\n  mixins: [mixinsTool],\n\n  data() {\n    return {\n      svgWidth: 1000,\n      svgHeight: 500\n    };\n  },\n\n  props: {\n    ini: {\n      lineType: {\n        type: [String],\n        default: 'Q'\n      },\n      isDotted: {\n        type: [Boolean],\n        default: false\n      },\n      scaling: {\n        type: [Object],\n        default: {\n          ZoomX: 1,\n          ZoomY: 1\n        }\n      }\n    },\n    width: {\n      type: [String, Number],\n      default: 0\n    },\n    height: {\n      type: [String, Number],\n      default: 0\n    },\n    id: {\n      type: [String, Number]\n    }\n  },\n  watch: {\n    ini: {\n      handler(newIni, oldIni) {\n        this.$store.dispatch('setViConfig', newIni);\n      },\n\n      deep: true\n    }\n  },\n  computed: {\n    classes() {\n      return [`${prefixCls}`];\n    },\n\n    areaStyles() {\n      let style = {};\n\n      if (this.isCssInUnit(this.width) >= 0) {\n        style.width = this.width;\n      } else {\n        style.width = `${this.width}px`;\n      }\n\n      if (this.isCssInUnit(this.height) >= 0) {\n        style.height = this.height;\n      } else {\n        style.height = `${this.height}px`;\n      }\n\n      return style;\n    }\n\n  },\n  mounted: function () {\n    let me = this;\n    this.setSvgHW(me);\n\n    window.onresize = function () {\n      me.setSvgHW(me);\n    };\n  },\n  methods: {\n    setSvgHW: function (me) {\n      let width = this.transferCss(this.width);\n      let height = this.transferCss(this.height);\n\n      if (me.getBrowserHW().width < width) {\n        me.svgWidth = width;\n      } else {\n        me.svgWidth = me.getBrowserHW().width;\n      }\n\n      if (me.getBrowserHW().height < height) {\n        me.svgHeight = height;\n      } else {\n        me.svgHeight = me.getBrowserHW().height;\n      }\n    },\n    mouseMenu: function (event) {\n      this.$emit('on-mouse', event, this.id);\n    },\n    onAddNodeModel: function (event) {\n      let node = event.dataTransfer.getData('nodemodel');\n      let scalin = this.$store.getters.getViConfig.scaling;\n\n      if (node) {\n        let nodeObj = JSON.parse(node);\n        let ref = this.$refs.svgArea;\n        nodeObj.positionX = ((event.clientX - this.getContainersLeft(ref)) / scalin.ZoomX).toFixed(1);\n        nodeObj.positionY = ((event.clientY - this.getContainersTop(ref)) / scalin.ZoomY).toFixed(1);\n        this.$emit('on-add-nodemodel', event, nodeObj);\n      }\n    }\n  }\n};",{"version":3,"sources":["workarea.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div :class=\"classes\" ref=\"svgArea\" :style=\"areaStyles\" @contextmenu.prevent=\"mouseMenu\" @dragover.prevent @drop.prevent=\"onAddNodeModel\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" :width=\"svgWidth\" :height=\"svgHeight\" :id=\"id\">\n          <g :transform=\"'translate(0,0) scale('+ini.scaling.ZoomX+','+ini.scaling.ZoomY+')'\">\n            <g>\n              <slot></slot>\n            </g>\n          </g>\n        </svg>\n  </div>\n</template>\n\n<script>\nimport mixinsTool from '../../mixins/tool'\nconst prefixCls = 'task-work-area'\nexport default {\n  name: 'WorkArea',\n  mixins: [ mixinsTool ],\n  data () {\n    return {\n      svgWidth: 1000,\n      svgHeight: 500\n    }\n  },\n  props: {\n    ini: {\n      lineType: {\n        type: [String],\n        default: 'Q'\n      },\n      isDotted: {\n        type: [Boolean],\n        default: false\n      },\n      scaling: {\n        type: [Object],\n        default: {ZoomX: 1, ZoomY: 1}\n      }\n    },\n    width: {\n      type: [String, Number],\n      default: 0\n    },\n    height: {\n      type: [String, Number],\n      default: 0\n    },\n    id: {\n      type: [String, Number]\n    }\n  },\n  watch: {\n    ini: {\n      handler (newIni, oldIni) {\n        this.$store.dispatch('setViConfig', newIni)\n      },\n      deep: true\n    }\n  },\n  computed: {\n    classes () {\n      return [\n        `${prefixCls}`\n      ]\n    },\n    areaStyles () {\n      let style = {}\n      if (this.isCssInUnit(this.width) >= 0) {\n        style.width = this.width\n      } else {\n        style.width = `${this.width}px`\n      }\n      if (this.isCssInUnit(this.height) >= 0) {\n        style.height = this.height\n      } else {\n        style.height = `${this.height}px`\n      }\n      return style\n    }\n  },\n  mounted: function () {\n    let me = this\n    this.setSvgHW(me)\n    window.onresize = function () {\n      me.setSvgHW(me)\n    }\n  },\n  methods: {\n    setSvgHW: function (me) {\n      let width = this.transferCss(this.width)\n      let height = this.transferCss(this.height)\n      if (me.getBrowserHW().width < width) {\n        me.svgWidth = width\n      } else {\n        me.svgWidth = me.getBrowserHW().width\n      }\n      if (me.getBrowserHW().height < height) {\n        me.svgHeight = height\n      } else {\n        me.svgHeight = me.getBrowserHW().height\n      }\n    },\n    mouseMenu: function (event) {\n      this.$emit('on-mouse', event, this.id)\n    },\n    onAddNodeModel: function (event) {\n      let node = event.dataTransfer.getData('nodemodel')\n      let scalin = this.$store.getters.getViConfig.scaling\n      if (node) {\n        let nodeObj = JSON.parse(node)\n        let ref = this.$refs.svgArea\n        nodeObj.positionX = ((event.clientX - this.getContainersLeft(ref)) / scalin.ZoomX).toFixed(1)\n        nodeObj.positionY = ((event.clientY - this.getContainersTop(ref)) / scalin.ZoomY).toFixed(1)\n        this.$emit('on-add-nodemodel', event, nodeObj)\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"node_modules/vue-task-node/src/lib/components/workarea"}]}